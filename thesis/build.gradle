plugins {
    id "me.champeau.gradle.antlr4" version "0.1"
    id "java"
    id "antlr"
}

group 'be.ugent'
version '0.1'

jar {
    manifest {
        attributes 'Main-class': 'be.ugent.neio.Main'
    }
}

repositories {
    mavenCentral()
    maven {
        url 'http://users.ugent.be/~mcvdoore/repository'
    }
}

dependencies {
    testCompile group: 'junit', name: 'junit'
    antlr "org.antlr:antlr4:4.5"

    compile group: 'markovandooren', name: 'chameleon', version: '1.2.1'
    compile group: 'markovandooren', name: 'jnome', version: '1.2.1'

    compile 'org.ow2.asm:asm:5.0.3'
    compile 'com.lexicalscope.jewelcli:jewelcli:0.8.5'
    compile 'org.apache.ant:ant:1.9.4'
}

// Antlr4 Configuration
antlr4 {
    source = file('src/main/grammar')
    output = file('src/main/java/be/ugent/neio/parsing')
    extraArgs = ['-package', 'be.ugent.neio.parsing']
}

sourceSets {
    main {
        java {
            srcDir 'src'
        }
    }
}
// Make the Java compile task depend on the Antlr4 task
compileJava.dependsOn antlr4

// Add the generated source files to the list of java sources
sourceSets.main.java.srcDirs += antlr4.output

// Add Antlr4 to classpath
configurations {
    compile.extendsFrom antlr4
}
// End Antlr4 Configuration